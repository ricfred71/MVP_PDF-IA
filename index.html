<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Processador de Documentos INPI - Conforme LGPD</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #f9f9f9;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .lgpd-notice {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .lgpd-notice h3 {
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .lgpd-notice h3::before {
            content: "üîí";
            margin-right: 10px;
            font-size: 1.2em;
        }

        .lgpd-notice ul {
            margin-left: 20px;
            color: #856404;
        }

        .ai-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .ai-option {
            padding: 20px;
            border: 3px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .ai-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .ai-option.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .ai-option h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .ai-option .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .ai-option .badge.free {
            background: #28a745;
            color: white;
        }

        .ai-option .badge.paid {
            background: #ffc107;
            color: #333;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .file-upload {
            border: 3px dashed #667eea;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .file-upload:hover {
            background: #f0f4ff;
            border-color: #764ba2;
        }

        .file-upload.dragover {
            background: #e8f0ff;
            border-color: #667eea;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .file-upload-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .privacy-controls {
            margin-top: 20px;
        }

        .privacy-checkbox {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }

        .privacy-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }

        .privacy-checkbox label {
            margin: 0;
            cursor: pointer;
        }

        .output-area {
            margin-top: 20px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            min-height: 200px;
            display: none;
        }

        .output-area.visible {
            display: block;
        }

        .output-area h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .output-area pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .loading.visible {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .alert.visible {
            display: block;
        }

        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .alert-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .alert-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }

        footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #6c757d;
            border-top: 1px solid #e0e0e0;
        }

        .config-section {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
        }

        .anonymization-stats {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border: 1px solid #e0e0e0;
        }

        .anonymization-stats h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            .ai-selector {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 1.5em;
            }

            .content {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîê Processador de Documentos INPI</h1>
            <p>An√°lise Inteligente com Prote√ß√£o de Dados LGPD</p>
        </header>

        <div class="content">
            <!-- LGPD Notice -->
            <div class="lgpd-notice">
                <h3>Prote√ß√£o de Dados Pessoais (LGPD)</h3>
                <ul>
                    <li>Todos os dados sens√≠veis s√£o anonimizados antes do envio para IA</li>
                    <li>CPF, CNPJ, nomes, endere√ßos e emails s√£o automaticamente protegidos</li>
                    <li>Processamento local - seus dados n√£o s√£o armazenados em servidores</li>
                    <li>Voc√™ mant√©m controle total sobre quais dados compartilhar</li>
                </ul>
            </div>

            <!-- AI Service Selection -->
            <div class="section">
                <h2>1. Selecione o Servi√ßo de IA</h2>
                <div class="ai-selector">
                    <div class="ai-option" id="freeAI" onclick="selectAI('free')">
                        <span class="badge free">GRATUITO</span>
                        <h3>IA Gratuita</h3>
                        <p>Modelos open-source compat√≠veis com OpenAI (Llama, Mistral, etc.)</p>
                        <small>Ideal para uso pessoal e testes</small>
                    </div>
                    <div class="ai-option" id="paidAI" onclick="selectAI('paid')">
                        <span class="badge paid">PAGO</span>
                        <h3>IA Comercial</h3>
                        <p>OpenAI GPT-4, Anthropic Claude, Google Gemini</p>
                        <small>Maior precis√£o e capacidade de an√°lise</small>
                    </div>
                </div>

                <!-- Configuration for selected AI -->
                <div id="aiConfig" style="display: none;">
                    <div class="config-section">
                        <div class="form-group">
                            <label for="apiEndpoint">Endpoint da API:</label>
                            <input type="text" id="apiEndpoint" placeholder="https://api.openai.com/v1/chat/completions">
                        </div>
                        <div class="form-group">
                            <label for="apiKey">Chave da API (opcional para servi√ßos gratuitos):</label>
                            <input type="password" id="apiKey" placeholder="sk-...">
                        </div>
                        <div class="form-group">
                            <label for="modelName">Modelo:</label>
                            <input type="text" id="modelName" placeholder="gpt-4, claude-3, llama-2, etc.">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Document Upload -->
            <div class="section">
                <h2>2. Carregar Documento INPI</h2>
                <div class="file-upload" id="fileUploadArea" onclick="document.getElementById('fileInput').click()">
                    <div class="file-upload-icon">üìÑ</div>
                    <h3>Clique ou arraste um arquivo PDF</h3>
                    <p>Documentos de patentes, marcas ou outros documentos do INPI</p>
                    <input type="file" id="fileInput" accept=".pdf,.txt" onchange="handleFileSelect(event)">
                </div>
                <div id="fileInfo" style="margin-top: 15px; display: none;">
                    <strong>Arquivo selecionado:</strong> <span id="fileName"></span>
                </div>
            </div>

            <!-- Privacy Controls -->
            <div class="section">
                <h2>3. Controles de Privacidade</h2>
                <div class="privacy-controls">
                    <div class="privacy-checkbox">
                        <input type="checkbox" id="anonymizeCPF" checked>
                        <label for="anonymizeCPF">Anonimizar CPF (xxx.xxx.xxx-xx ‚Üí [CPF-REDACTED])</label>
                    </div>
                    <div class="privacy-checkbox">
                        <input type="checkbox" id="anonymizeCNPJ" checked>
                        <label for="anonymizeCNPJ">Anonimizar CNPJ (xx.xxx.xxx/xxxx-xx ‚Üí [CNPJ-REDACTED])</label>
                    </div>
                    <div class="privacy-checkbox">
                        <input type="checkbox" id="anonymizeNames" checked>
                        <label for="anonymizeNames">Anonimizar Nomes Pr√≥prios ([NOME-REDACTED])</label>
                    </div>
                    <div class="privacy-checkbox">
                        <input type="checkbox" id="anonymizeEmails" checked>
                        <label for="anonymizeEmails">Anonimizar E-mails ([EMAIL-REDACTED])</label>
                    </div>
                    <div class="privacy-checkbox">
                        <input type="checkbox" id="anonymizeAddresses" checked>
                        <label for="anonymizeAddresses">Anonimizar Endere√ßos ([ENDERECO-REDACTED])</label>
                    </div>
                    <div class="privacy-checkbox">
                        <input type="checkbox" id="anonymizePhones" checked>
                        <label for="anonymizePhones">Anonimizar Telefones ([TELEFONE-REDACTED])</label>
                    </div>
                </div>
            </div>

            <!-- Processing Options -->
            <div class="section">
                <h2>4. An√°lise do Documento</h2>
                <div class="form-group">
                    <label for="analysisPrompt">Instru√ß√£o para a IA:</label>
                    <textarea id="analysisPrompt" rows="4" placeholder="Ex: Analise este documento e forne√ßa um resumo das principais informa√ß√µes sobre a patente/marca...">Analise este documento do INPI e forne√ßa:
1. Tipo de documento (patente, marca, etc.)
2. Resumo das principais informa√ß√µes
3. Status e datas relevantes
4. Observa√ß√µes importantes</textarea>
                </div>
                <div>
                    <button class="btn btn-primary" id="processBtn" onclick="processDocument()" disabled>
                        üöÄ Processar com IA
                    </button>
                    <button class="btn btn-secondary" onclick="resetForm()">
                        üîÑ Limpar
                    </button>
                </div>
            </div>

            <!-- Alerts -->
            <div id="alertArea"></div>

            <!-- Loading -->
            <div class="loading" id="loadingArea">
                <div class="spinner"></div>
                <p>Processando documento com IA...</p>
            </div>

            <!-- Anonymization Stats -->
            <div class="anonymization-stats" id="anonymizationStats" style="display: none;">
                <h4>üìä Estat√≠sticas de Anonimiza√ß√£o</h4>
                <div id="statsContent"></div>
            </div>

            <!-- Output Area -->
            <div class="output-area" id="outputArea">
                <h3>üìù Resultado da An√°lise</h3>
                <div id="outputContent"></div>
            </div>
        </div>

        <footer>
            <p><strong>ExtensaoPatente-Marca</strong> - Ferramenta para an√°lise de documentos INPI com prote√ß√£o LGPD</p>
            <p>Desenvolvido com foco em privacidade e seguran√ßa de dados</p>
        </footer>
    </div>

    <script src="anonymizer.js"></script>
    <script src="pdfProcessor.js"></script>
    <script src="app.js"></script>
</body>
</html>
